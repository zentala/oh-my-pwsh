#!/bin/sh
#
# oh-my-pwsh pre-commit hook (Windows batch wrapper)
#
# This wrapper calls the PowerShell script pre-commit.ps1
# Git on Windows doesn't properly handle PowerShell shebangs,
# so we use this sh/batch hybrid wrapper.
#

# Batch portion (Windows)
@echo off 2>nul || goto :batch
:batch
pwsh.exe -NoProfile -ExecutionPolicy Bypass -File "%~dp0pre-commit.ps1"
exit /b %ERRORLEVEL%

# Shell portion (Unix/Linux/macOS)
:posix
SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
exec pwsh -NoProfile -ExecutionPolicy Bypass -File "$SCRIPT_DIR/pre-commit.ps1"
